
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="An undergraduate textbook on modeling healthcare data using graphs.">
      
      
        <meta name="author" content="Dan McCreary">
      
      
        <link rel="canonical" href="https://dmccreary.github.io/modeling-healthcare-data/chapters/03-graph-query-languages/">
      
      
        <link rel="prev" href="../02-intro-to-healthcare-systems/quiz/">
      
      
        <link rel="next" href="quiz/">
      
      
      <link rel="icon" href="../../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.12">
    
    
      
        <title>Content - Modeling Healthcare Data with Graphs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.2afb09e1.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Content - Modeling Healthcare Data with Graphs" >
      
        <meta  property="og:description"  content="An undergraduate textbook on modeling healthcare data using graphs." >
      
        <meta  property="og:image"  content="https://dmccreary.github.io/modeling-healthcare-data/assets/images/social/chapters/03-graph-query-languages/index.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://dmccreary.github.io/modeling-healthcare-data/chapters/03-graph-query-languages/" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Content - Modeling Healthcare Data with Graphs" >
      
        <meta  name="twitter:description"  content="An undergraduate textbook on modeling healthcare data using graphs." >
      
        <meta  name="twitter:image"  content="https://dmccreary.github.io/modeling-healthcare-data/assets/images/social/chapters/03-graph-query-languages/index.png" >
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="orange">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#graph-query-languages-and-technologies" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Modeling Healthcare Data with Graphs" class="md-header__button md-logo" aria-label="Modeling Healthcare Data with Graphs" data-md-component="logo">
      
  <img src="../../img/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Modeling Healthcare Data with Graphs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Content
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/dmccreary/modeling-healthcare-data" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub Repo
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Modeling Healthcare Data with Graphs" class="md-nav__button md-logo" aria-label="Modeling Healthcare Data with Graphs" data-md-component="logo">
      
  <img src="../../img/logo.png" alt="logo">

    </a>
    Modeling Healthcare Data with Graphs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/dmccreary/modeling-healthcare-data" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub Repo
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    About
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../course-description/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Course Description
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Chapters
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Chapters
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../01-graph-theory-database-foundations/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Chapter 1 - Graph Theory and Database Foundations
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../02-intro-to-healthcare-systems/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Chapter 2 - Introduction to Healthcare Systems
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="./" class="md-nav__link md-nav__link--active">
              
  
  
  <span class="md-ellipsis">
    Chapter 3 - Graph Query Languages and Technologies
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link md-nav__link--active" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            Chapter 3 - Graph Query Languages and Technologies
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="quiz/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Quiz
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../04-patient-centric-data-modeling/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Chapter 4 - Patient-Centric Data Modeling
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../05-provider-operations-networks/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Chapter 5 - Provider Operations and Networks
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../06-payer-perspective-insurance/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Chapter 6 - Payer Perspective and Insurance Claims
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../07-healthcare-financial-analytics/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Chapter 7 - Healthcare Financial Analytics
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../08-fraud-detection-compliance/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Chapter 8 - Fraud Detection and Compliance
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../09-graph-algorithms-analytics/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Chapter 9 - Graph Algorithms and Analytics
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../10-ai-machine-learning-integration/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Chapter 10 - AI and Machine Learning Integration
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../11-security-privacy-governance/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Chapter 11 - Security, Privacy, and Data Governance
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../12-capstone-real-world-applications/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Chapter 12 - Capstone Projects and Real-World Applications
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../learning-graph/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Learning Graph
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../sims/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    MicroSims
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../stories/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Stories
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../prompts/index.md" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Prompts
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../book-metrics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Book Metrics
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../faq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FAQ
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../glossary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Glossary
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../references/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    References
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../feedback/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Feedback
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how-we-built-this-site/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    How We Built This Site
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../license/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    License
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contact/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contact
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    <span class="md-ellipsis">
      Summary
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#concepts-covered" class="md-nav__link">
    <span class="md-ellipsis">
      Concepts Covered
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#graph-pattern-matching-the-foundation" class="md-nav__link">
    <span class="md-ellipsis">
      Graph Pattern Matching: The Foundation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cypher-query-language" class="md-nav__link">
    <span class="md-ellipsis">
      Cypher Query Language
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gql-standard-the-future-of-graph-queries" class="md-nav__link">
    <span class="md-ellipsis">
      GQL Standard: The Future of Graph Queries
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gsql-high-performance-graph-analytics" class="md-nav__link">
    <span class="md-ellipsis">
      GSQL: High-Performance Graph Analytics
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#path-queries-following-clinical-journeys" class="md-nav__link">
    <span class="md-ellipsis">
      Path Queries: Following Clinical Journeys
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#subgraph-queries-extracting-clinical-context" class="md-nav__link">
    <span class="md-ellipsis">
      Subgraph Queries: Extracting Clinical Context
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aggregate-queries-population-health-analytics" class="md-nav__link">
    <span class="md-ellipsis">
      Aggregate Queries: Population Health Analytics
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#graph-indexes-accelerating-query-performance" class="md-nav__link">
    <span class="md-ellipsis">
      Graph Indexes: Accelerating Query Performance
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#query-performance-tuning" class="md-nav__link">
    <span class="md-ellipsis">
      Query Performance Tuning
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#graph-query-optimization-strategies" class="md-nav__link">
    <span class="md-ellipsis">
      Graph Query Optimization Strategies
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#practical-considerations-for-healthcare-applications" class="md-nav__link">
    <span class="md-ellipsis">
      Practical Considerations for Healthcare Applications
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary-and-key-takeaways" class="md-nav__link">
    <span class="md-ellipsis">
      Summary and Key Takeaways
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#references" class="md-nav__link">
    <span class="md-ellipsis">
      References
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/dmccreary/modeling-healthcare-data/blob/master/docs/chapters/03-graph-query-languages/index.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  


<h1 id="graph-query-languages-and-technologies">Graph Query Languages and Technologies</h1>
<h2 id="summary">Summary</h2>
<p>This chapter explores the technical aspects of querying graph databases using industry-standard languages including Cypher, GQL, and GSQL. You will learn graph pattern matching techniques, query optimization strategies, indexing methods, and performance tuning approaches. By the end of this chapter, you will be able to write efficient queries to extract insights from complex healthcare graph data.</p>
<h2 id="concepts-covered">Concepts Covered</h2>
<p>This chapter covers the following 10 concepts from the learning graph:</p>
<ol>
<li>Cypher Query Language</li>
<li>GQL Standard</li>
<li>GSQL</li>
<li>Graph Pattern Matching</li>
<li>Graph Query Optimization</li>
<li>Graph Index</li>
<li>Query Performance</li>
<li>Path Query</li>
<li>Subgraph Query</li>
<li>Aggregate Query</li>
</ol>
<h2 id="prerequisites">Prerequisites</h2>
<p>This chapter builds on concepts from:</p>
<ul>
<li><a href="../01-graph-theory-database-foundations/">Chapter 01: Graph Theory and Database Foundations</a></li>
</ul>
<hr />
<h2 id="introduction">Introduction</h2>
<p>Healthcare organizations face the challenge of querying complex, interconnected data that spans patient records, provider networks, treatment pathways, and billing systems. Traditional SQL-based approaches struggle with the recursive joins and multi-hop traversals required to answer questions like "Which patients share similar treatment pathways?" or "What is the complete care network for this patient?" Graph query languages address these challenges by providing declarative syntax optimized for relationship-centric queries, enabling healthcare analysts to extract insights that would be prohibitively expensive using relational approaches.</p>
<p>This chapter explores three major graph query languages—Cypher, GQL, and GSQL—along with the fundamental query patterns, optimization techniques, and performance considerations essential for working with healthcare graph data. You will learn how to write efficient queries that leverage graph-native storage architectures to perform real-time analytics on complex clinical datasets.</p>
<h2 id="graph-pattern-matching-the-foundation">Graph Pattern Matching: The Foundation</h2>
<p>Graph queries work fundamentally differently from relational queries. Rather than specifying table joins, you describe patterns of nodes and relationships you want to find within the graph. The database engine then searches for all subgraphs that match your pattern specification, returning results that preserve the structural context of the data.</p>
<p>Pattern matching consists of three core elements:</p>
<ul>
<li><strong>Node patterns</strong>: Specify node labels and property constraints</li>
<li><strong>Relationship patterns</strong>: Define edge types and directionality</li>
<li><strong>Property filters</strong>: Constrain results based on node or edge attributes</li>
</ul>
<p>Consider a healthcare scenario where you need to find all patients who were prescribed a specific medication after being diagnosed with diabetes. In a relational database, this would require joining patient, diagnosis, and prescription tables with complex date filtering. In a graph query language, you describe the pattern directly: a Patient node connected to a Diagnosis node (with disease="Diabetes") which connects to a Prescription node (with medication="Metformin"), with temporal constraints on the relationship timestamps.</p>
<details>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span></pre></div></td><td class="code"><div><pre><span></span><code>&lt;summary&gt;Healthcare Graph Pattern Examples&lt;/summary&gt;
Type: diagram

Purpose: Illustrate common pattern matching scenarios in healthcare graphs

Components to show:
- Three example patterns side by side

Pattern 1 - Patient-Diagnosis-Prescription:
- Patient (circle, blue)
- Connected by HAS_DIAGNOSIS arrow to
- Diagnosis node (circle, red) labeled &quot;Diabetes&quot;
- Connected by PRESCRIBED arrow to
- Prescription node (circle, green) labeled &quot;Metformin&quot;
- Date constraint annotation on PRESCRIBED edge

Pattern 2 - Provider Referral Network:
- PCP (Primary Care Provider) node (square, purple)
- Connected by REFERS_TO arrow to
- Specialist node (square, purple)
- Connected by REFERS_TO arrow to
- Laboratory node (square, orange)
- Show bi-directional possibility with dotted reverse arrows

Pattern 3 - Treatment Pathway:
- Patient (circle, blue)
- Connected to sequence of Treatment nodes (hexagons, teal)
- Treatment1 → Treatment2 → Treatment3
- NEXT relationship arrows with temporal ordering
- Outcome node (diamond, yellow) at end

Style: Clean network diagram with labeled nodes and directed edges

Labels: Include node types and relationship names on arrows

Annotations: Add property constraints like &quot;date &gt; 2024-01-01&quot; on relevant edges

Color scheme: Use healthcare-themed colors (blues for patients, purples for providers, reds for conditions)

Implementation: SVG diagram with clear labels and directional arrows
</code></pre></div></td></tr></table></div>
</details>
<p>The power of pattern matching lies in its declarative nature. You specify <em>what</em> pattern you want to find, not <em>how</em> to find it. The graph database engine handles the traversal optimization, leveraging indexes and native graph storage to execute queries efficiently.</p>
<h2 id="cypher-query-language">Cypher Query Language</h2>
<p>Cypher, originally developed by Neo4j and now part of the openCypher project, has become the most widely adopted graph query language. Its ASCII-art syntax makes patterns visually intuitive: nodes are represented in parentheses <code>(n)</code>, relationships in brackets with arrows <code>--&gt;</code> or <code>&lt;--</code>, and patterns combine these elements to express complex graph structures.</p>
<p>A basic Cypher query follows this structure:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">variable</span><span class="p">:</span><span class="n">Label</span><span class="w"> </span><span class="p">{</span><span class="n">property</span><span class="p">:</span><span class="w"> </span><span class="n">value</span><span class="p">})</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">additional_constraints</span>
<span class="k">RETURN</span><span class="w"> </span><span class="n">variable</span><span class="p">.</span><span class="n">property</span>
</code></pre></div></td></tr></table></div>
<p>The <code>MATCH</code> clause specifies the pattern to find, <code>WHERE</code> applies additional filters, and <code>RETURN</code> defines what data to output. For healthcare applications, this translates naturally to questions like finding patients with specific clinical characteristics.</p>
<p>Here's a practical example finding patients who have been prescribed conflicting medications:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="p">:</span><span class="n">Patient</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">TAKES</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">m1</span><span class="p">:</span><span class="n">Medication</span><span class="p">),</span>
<span class="w">      </span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">TAKES</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">m2</span><span class="p">:</span><span class="n">Medication</span><span class="p">),</span>
<span class="w">      </span><span class="p">(</span><span class="n">m1</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">CONFLICTS_WITH</span><span class="o">]-</span><span class="p">(</span><span class="n">m2</span><span class="p">)</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">m1</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="p">&lt;&gt;</span><span class="w"> </span><span class="n">m2</span><span class="p">.</span><span class="n">name</span>
<span class="k">RETURN</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">patient_id</span><span class="p">,</span><span class="w"> </span><span class="n">m1</span><span class="p">.</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">m2</span><span class="p">.</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">primary_provider</span>
</code></pre></div></td></tr></table></div>
<p>This query identifies patients (<code>p</code>) who take two different medications (<code>m1</code> and <code>m2</code>) that have a <code>CONFLICTS_WITH</code> relationship, a critical safety check that would require complex self-joins in SQL.</p>
<details>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span></pre></div></td><td class="code"><div><pre><span></span><code>&lt;summary&gt;Cypher Query Components Interactive Infographic&lt;/summary&gt;
Type: infographic

Purpose: Create an interactive breakdown of Cypher query syntax with healthcare examples

Layout: Vertical flow showing query structure from top to bottom

Sections:

1. MATCH Clause (Blue section at top):
   - Header: &quot;MATCH: Specify Graph Patterns&quot;
   - Visual: Node-relationship pattern diagram
   - Example: `MATCH (p:Patient)-[:HAS_DIAGNOSIS]-&gt;(d:Disease)`
   - Hover: &quot;Describes the graph structure you want to find&quot;
   - Click to expand: Shows variations (optional matches, variable-length paths)

2. WHERE Clause (Yellow section):
   - Header: &quot;WHERE: Filter Results&quot;
   - Visual: Funnel icon with filter criteria
   - Example: `WHERE d.icd_code STARTS WITH &#39;E11&#39; AND p.age &gt; 65`
   - Hover: &quot;Applies property-based constraints&quot;
   - Click to expand: Shows common operators (&gt;, &lt;, IN, CONTAINS, regex)

3. WITH Clause (Purple section):
   - Header: &quot;WITH: Pipeline Query Stages&quot;
   - Visual: Flow diagram showing data transformation
   - Example: `WITH p, count(d) AS diagnosis_count WHERE diagnosis_count &gt; 3`
   - Hover: &quot;Chains query segments and aggregates data&quot;
   - Click to expand: Shows aggregation functions (count, sum, collect)

4. RETURN Clause (Green section at bottom):
   - Header: &quot;RETURN: Shape Output&quot;
   - Visual: Table/result set icon
   - Example: `RETURN p.patient_id, p.name, diagnosis_count ORDER BY diagnosis_count DESC`
   - Hover: &quot;Defines what data to output and how to order it&quot;
   - Click to expand: Shows formatting options (DISTINCT, LIMIT, ORDER BY)

5. Complete Example (Gray section):
   - Full query combining all clauses
   - Color-coded to match sections above
   - Description: &quot;Find elderly patients with multiple chronic conditions&quot;

Interactive features:
- Hover over each section for tooltip explanation
- Click section header to expand with detailed examples
- Click healthcare example to see result preview
- Color-coded syntax highlighting matching the sections

Visual style: Modern card-based layout with syntax highlighting

Implementation: HTML/CSS/JavaScript with expandable sections and tooltips
</code></pre></div></td></tr></table></div>
</details>
<p>Cypher's expressiveness extends to variable-length paths, which are essential for healthcare network analysis. To find all providers within three referral steps of a primary care physician, you can write:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">MATCH</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">(</span><span class="n">pcp</span><span class="p">:</span><span class="n">Provider</span><span class="w"> </span><span class="p">{</span><span class="n">specialty</span><span class="p">:</span><span class="w"> </span><span class="err">&#39;</span><span class="n">Primary</span><span class="w"> </span><span class="n">Care</span><span class="err">&#39;</span><span class="p">})</span><span class="o">-[</span><span class="p">:</span><span class="n">REFERS_TO</span><span class="p">*</span><span class="m">1</span><span class="p">..</span><span class="m">3</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">specialist</span><span class="p">:</span><span class="n">Provider</span><span class="p">)</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">specialist</span><span class="p">.</span><span class="n">specialty</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="err">&#39;</span><span class="n">Cardiology</span><span class="err">&#39;</span>
<span class="k">RETURN</span><span class="w"> </span><span class="n">pcp</span><span class="p">.</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">specialist</span><span class="p">.</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">length</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">referral_distance</span>
<span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">referral_distance</span>
</code></pre></div></td></tr></table></div>
<p>The <code>*1..3</code> syntax specifies variable-length paths between 1 and 3 hops, enabling queries that would require recursive CTEs or complex application logic in SQL.</p>
<h2 id="gql-standard-the-future-of-graph-queries">GQL Standard: The Future of Graph Queries</h2>
<p>The Graph Query Language (GQL) standard, finalized by ISO/IEC in 2024, represents the culmination of decades of graph database research and industry practice. GQL builds upon Cypher's foundations while adding features from other query languages like GSQL and SPARQL, creating a unified standard analogous to SQL's role in the relational database ecosystem.</p>
<p>GQL introduces several enhancements over Cypher:</p>
<ul>
<li><strong>Schema support</strong>: Native integration with formal graph schema definitions</li>
<li><strong>Composable graph queries</strong>: Advanced query composition and reuse mechanisms</li>
<li><strong>Standardized syntax</strong>: Vendor-neutral specification for cross-platform portability</li>
<li><strong>Enhanced type system</strong>: Stronger type checking for nodes, edges, and properties</li>
</ul>
<p>The following table compares key features across graph query languages:</p>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Cypher</th>
<th>GQL</th>
<th>GSQL</th>
</tr>
</thead>
<tbody>
<tr>
<td>Pattern matching</td>
<td>ASCII-art syntax</td>
<td>Standardized patterns</td>
<td>Visual programming model</td>
</tr>
<tr>
<td>Path queries</td>
<td>Variable-length <code>*</code></td>
<td>Enhanced path semantics</td>
<td>Multi-hop traversal with accumulators</td>
</tr>
<tr>
<td>Aggregation</td>
<td>Built-in functions</td>
<td>Extended aggregate support</td>
<td>User-defined aggregations</td>
</tr>
<tr>
<td>Mutability</td>
<td>Read/write queries</td>
<td>Transaction semantics</td>
<td>Bulk loading optimized</td>
</tr>
<tr>
<td>Schema enforcement</td>
<td>Optional labels</td>
<td>Formal schema integration</td>
<td>Strongly typed</td>
</tr>
<tr>
<td>Vendor support</td>
<td>Neo4j, Memgraph, others</td>
<td>Emerging adoption</td>
<td>TigerGraph</td>
</tr>
</tbody>
</table>
<p>GQL's standardization effort aims to prevent fragmentation in the graph database market, similar to how SQL standardization enabled database portability in the relational era. Healthcare organizations adopting GQL can expect greater flexibility in choosing graph database vendors without rewriting application queries.</p>
<details>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span></pre></div></td><td class="code"><div><pre><span></span><code>&lt;summary&gt;Evolution of Graph Query Languages Timeline&lt;/summary&gt;
Type: timeline

Time period: 2000-2025

Orientation: Horizontal

Events:

- 2002: Resource Description Framework (RDF) and SPARQL for semantic web
  Detail: Academic focus on triple stores, limited industry adoption for operational systems

- 2010: Neo4j releases Cypher as open-source query language
  Detail: ASCII-art syntax makes graph patterns intuitive, drives Neo4j adoption in enterprise

- 2012: TigerGraph introduces GSQL with strong typing and procedural features
  Detail: Targets high-performance analytics use cases with compiled queries

- 2015: openCypher project launches for vendor-neutral Cypher specification
  Detail: Multiple vendors (SAP, Redis, Memgraph) adopt Cypher implementations

- 2019: ISO begins formal GQL standardization process
  Detail: Industry collaboration to create SQL-equivalent standard for graph databases

- 2023: GQL draft specification published for public review
  Detail: Combines Cypher, GSQL, and SPARQL concepts into unified standard

- 2024: GQL approved as ISO/IEC international standard
  Detail: First major graph query language with formal standardization

- 2025: Major database vendors announce GQL support roadmaps
  Detail: Oracle, Neo4j, TigerGraph commit to GQL implementations

Visual style: Horizontal timeline with milestone markers

Color coding:
- Blue: Academic/research developments (2000-2010)
- Purple: Industry innovation period (2010-2019)
- Green: Standardization era (2019-2024)
- Gold: Adoption phase (2024+)

Interactive features:
- Hover over milestone to see detailed description
- Click to expand with links to specifications and vendor announcements
- Show concurrent developments in parallel tracks

Implementation: HTML/CSS/JavaScript timeline with SVG elements
</code></pre></div></td></tr></table></div>
</details>
<p>For healthcare applications, GQL's formal schema support enables stronger data governance. Medical ontologies like SNOMED CT and ICD coding systems can be represented as formal graph schemas, with GQL queries validated against these schemas at compile time rather than runtime, reducing errors in clinical decision support systems.</p>
<h2 id="gsql-high-performance-graph-analytics">GSQL: High-Performance Graph Analytics</h2>
<p>GSQL, developed by TigerGraph, takes a different approach to graph querying by emphasizing compiled, strongly-typed queries optimized for large-scale analytics. While Cypher and GQL prioritize declarative expressiveness, GSQL allows procedural programming constructs within queries, enabling complex algorithmic logic that would be challenging to express purely declaratively.</p>
<p>GSQL queries are compiled to C++ and optimized for parallel execution across distributed graph partitions, making GSQL particularly well-suited for population health analytics, fraud detection networks, and real-time recommendation systems that process millions of nodes and edges.</p>
<p>Key GSQL features include:</p>
<ul>
<li><strong>Accumulators</strong>: Stateful variables that aggregate data during traversals</li>
<li><strong>User-defined functions</strong>: Custom logic embedded directly in queries</li>
<li><strong>Control flow</strong>: Procedural constructs like loops and conditionals</li>
<li><strong>Parallel execution</strong>: Automatic query parallelization across distributed graphs</li>
</ul>
<p>Consider a complex healthcare analytics query that calculates risk scores by traversing patient treatment histories and aggregating outcome data. In GSQL, this might look like:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">QUERY</span><span class="w"> </span><span class="n">patient_risk_score</span><span class="o">(</span><span class="k">VERTEX</span><span class="p">&lt;</span><span class="n">Patient</span><span class="p">&gt;</span><span class="w"> </span><span class="n">input_patient</span><span class="o">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nb">SumAccum</span><span class="p">&lt;</span><span class="k">FLOAT</span><span class="p">&gt;</span><span class="w"> </span><span class="nv">@risk_score</span><span class="o">;</span>
<span class="w">  </span><span class="nb">AvgAccum</span><span class="w"> </span><span class="nv">@avg_outcome</span><span class="o">;</span>

<span class="w">  </span><span class="n">seed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">input_patient</span><span class="p">}</span><span class="o">;</span>

<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">Traverse</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">treatments</span>
<span class="w">  </span><span class="n">patients</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">seed</span><span class="o">:</span><span class="n">p</span>
<span class="w">             </span><span class="o">-(</span><span class="n">HAS_TREATMENT</span><span class="o">:</span><span class="n">e</span><span class="o">)-</span><span class="p">&gt;</span><span class="n">Treatment</span><span class="o">:</span><span class="n">t</span>
<span class="w">             </span><span class="k">ACCUM</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="nv">@risk_score</span><span class="w"> </span><span class="o">+= </span><span class="n">t</span><span class="p">.</span><span class="n">severity_weight</span><span class="o">,</span>
<span class="w">                   </span><span class="n">p</span><span class="p">.</span><span class="nv">@avg_outcome</span><span class="w"> </span><span class="o">+= </span><span class="n">t</span><span class="p">.</span><span class="n">outcome_score</span><span class="o">;</span>

<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">Traverse</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">similar</span><span class="w"> </span><span class="n">patients</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">comparative</span><span class="w"> </span><span class="n">analysis</span>
<span class="w">  </span><span class="n">similar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">patients</span><span class="o">:</span><span class="n">p</span>
<span class="w">            </span><span class="o">-(</span><span class="n">SIMILAR_TO</span><span class="o">:</span><span class="n">e</span><span class="o">)-</span><span class="p">&gt;</span><span class="n">Patient</span><span class="o">:</span><span class="n">s</span>
<span class="w">            </span><span class="k">WHERE</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">age_group</span><span class="w"> </span><span class="o">== </span><span class="n">p</span><span class="p">.</span><span class="n">age_group</span>
<span class="w">            </span><span class="k">ACCUM</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="nv">@risk_score</span><span class="w"> </span><span class="o">+= </span><span class="n">p</span><span class="p">.</span><span class="nv">@risk_score</span><span class="w"> </span><span class="p">*</span><span class="w"> </span><span class="m">0.1</span><span class="o">;</span>

<span class="w">  </span><span class="k">PRINT</span><span class="w"> </span><span class="n">patients</span><span class="p">[</span><span class="n">patients</span><span class="p">.</span><span class="nv">@risk_score</span><span class="o">,</span><span class="w"> </span><span class="n">patients</span><span class="p">.</span><span class="nv">@avg_outcome</span><span class="p">]</span><span class="o">;</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>The <code>@risk_score</code> accumulator maintains state across the traversal, aggregating severity weights from treatments and incorporating comparative data from similar patients—a pattern that would require multiple query rounds or complex subqueries in purely declarative languages.</p>
<details>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span></pre></div></td><td class="code"><div><pre><span></span><code>&lt;summary&gt;GSQL Accumulator Pattern MicroSim&lt;/summary&gt;
Type: microsim

Learning objective: Demonstrate how GSQL accumulators aggregate data during graph traversals in real-time

Canvas layout (900x650px):
- Top section (900x450): Graph visualization area
- Bottom section (900x200): Control panel and accumulator value display

Visual elements in graph area:
- Central Patient node (large blue circle) labeled &quot;Patient ID: 12345&quot;
- 8 Treatment nodes (medium green circles) connected to patient with HAS_TREATMENT edges
- 4 Complication nodes (small red circles) connected to some treatments
- Each treatment node shows severity_weight value (1-10)
- Each complication shows complication_weight value (1-5)

Interactive controls (bottom panel):
- Button: &quot;Start Traversal&quot; - begins animated accumulation
- Button: &quot;Reset&quot; - clears accumulators and animation
- Slider: Animation speed (100ms - 2000ms per step)
- Checkbox: &quot;Show Accumulator Updates&quot; (highlights nodes as visited)
- Dropdown: Select accumulator type (SumAccum, MaxAccum, AvgAccum, SetAccum)

Accumulator Display Panel:
- Current risk_score value (large number, updates during traversal)
- Treatment count (increments as treatments visited)
- Average severity (calculated in real-time)
- Complications detected (list accumulates)

Default parameters:
- Accumulator: SumAccum
- Animation speed: 500ms
- Patient: Pre-populated with 8 treatments

Behavior:
- Click &quot;Start Traversal&quot; to begin
- Animate traversal from Patient to each Treatment node sequentially
- As each Treatment is visited:
  * Highlight current node in yellow
  * Add severity_weight to risk_score accumulator
  * Update accumulator display panel with new value
  * Show &quot;+X&quot; animation near patient node
- When treatment has complications:
  * Traverse to Complication nodes
  * Add complication_weight to accumulator
  * Mark complication nodes as visited (blue outline)
- Final state: Show total risk_score and summary statistics

Code structure:
- Use p5.js for rendering graph and animations
- Store graph as adjacency structure with node/edge properties
- Implement accumulator classes (SumAccum, MaxAccum, AvgAccum, SetAccum)
- Use frameCount and timing logic for step-by-step animation
- Color-code nodes based on visit status (unvisited gray, current yellow, visited green)

Implementation notes:
- Graph layout using force-directed algorithm (patient at center)
- Edge labels show relationship types
- Node hover shows full property details
- Accumulator panel updates in real-time with smooth number transitions

Implementation: p5.js with custom accumulator simulation logic
</code></pre></div></td></tr></table></div>
</details>
<p>GSQL's compiled execution model provides significant performance advantages for healthcare analytics at scale. A query analyzing medication interaction networks across millions of patients can execute 10-100x faster than interpreted query languages, enabling real-time clinical decision support that would be impractical with slower execution models.</p>
<h2 id="path-queries-following-clinical-journeys">Path Queries: Following Clinical Journeys</h2>
<p>Path queries enable analysis of sequential relationships within graphs, essential for understanding patient care pathways, disease progression timelines, and referral networks. Unlike simple pattern matching that finds isolated subgraphs, path queries preserve the sequence and connectivity of traversed nodes and edges.</p>
<p>Healthcare applications frequently require path analysis:</p>
<ul>
<li><strong>Treatment pathways</strong>: What sequence of treatments do diabetic patients typically receive?</li>
<li><strong>Referral chains</strong>: How do patients move through the provider network?</li>
<li><strong>Disease progression</strong>: What is the temporal sequence of diagnoses for chronic disease patients?</li>
<li><strong>Supply chains</strong>: How do medications flow from manufacturers to patients?</li>
</ul>
<p>In Cypher, path queries use variable-length relationship patterns:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1">// Find all care pathways from diagnosis to resolution</span>
<span class="k">MATCH</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="p">:</span><span class="n">Patient</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">DIAGNOSED_WITH</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">d</span><span class="p">:</span><span class="n">Disease</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">TREATED_WITH</span><span class="p">*</span><span class="m">1</span><span class="p">..</span><span class="m">5</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">outcome</span><span class="p">:</span><span class="n">Outcome</span><span class="p">)</span>
<span class="c1">WHERE d.icd_code = &#39;I50.9&#39;  // Heart failure</span>
<span class="k">RETURN</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">patient_id</span><span class="p">,</span>
<span class="w">       </span><span class="o">[</span><span class="n">node</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="n">nodes</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="n">node</span><span class="p">.</span><span class="n">name</span><span class="o">]</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">pathway</span><span class="p">,</span>
<span class="w">       </span><span class="n">length</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">pathway_length</span><span class="p">,</span>
<span class="w">       </span><span class="n">outcome</span><span class="p">.</span><span class="n">status</span>
<span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">pathway_length</span>
</code></pre></div></td></tr></table></div>
<p>The <code>*1..5</code> syntax specifies paths between 1 and 5 treatment steps, with <code>nodes(path)</code> extracting all nodes along the path for analysis.</p>
<p>Path queries become particularly powerful when combined with shortest path algorithms. Finding the most efficient care pathway for a specific condition can guide treatment planning:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">d</span><span class="p">:</span><span class="n">Disease</span><span class="w"> </span><span class="p">{</span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="err">&#39;</span><span class="n">Type</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="n">Diabetes</span><span class="err">&#39;</span><span class="p">}),</span>
<span class="w">      </span><span class="p">(</span><span class="n">o</span><span class="p">:</span><span class="n">Outcome</span><span class="w"> </span><span class="p">{</span><span class="n">status</span><span class="p">:</span><span class="w"> </span><span class="err">&#39;</span><span class="n">Controlled</span><span class="err">&#39;</span><span class="p">})</span>
<span class="k">MATCH</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">shortestPath</span><span class="p">((</span><span class="n">d</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">TREATMENT_OPTION</span><span class="p">*</span><span class="o">]-</span><span class="p">(</span><span class="n">o</span><span class="p">))</span>
<span class="k">RETURN</span><span class="w"> </span><span class="o">[</span><span class="n">node</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="n">nodes</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="n">node</span><span class="p">.</span><span class="n">treatment_name</span><span class="o">]</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">recommended_pathway</span><span class="p">,</span>
<span class="w">       </span><span class="n">reduce</span><span class="p">(</span><span class="n">cost</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="n">relationships</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="n">cost</span><span class="w"> </span><span class="err">+</span><span class="w"> </span><span class="n">r</span><span class="p">.</span><span class="n">average_cost</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">total_cost</span><span class="p">,</span>
<span class="w">       </span><span class="n">reduce</span><span class="p">(</span><span class="n">time</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="n">relationships</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="err">+</span><span class="w"> </span><span class="n">r</span><span class="p">.</span><span class="n">average_duration_days</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">total_time</span>
</code></pre></div></td></tr></table></div>
<p>This query identifies the shortest treatment pathway from diagnosis to controlled outcome, calculating total cost and duration by aggregating relationship properties along the path.</p>
<details>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span></pre></div></td><td class="code"><div><pre><span></span><code>&lt;summary&gt;Care Pathway Comparison Chart&lt;/summary&gt;
Type: chart

Chart type: Horizontal bar chart with grouped bars

Purpose: Compare effectiveness metrics across different Type 2 Diabetes treatment pathways discovered by path queries

Y-axis: Treatment pathway names (5 pathways)
X-axis: Effectiveness score (0-100, composite metric)

Pathways (Y-axis labels):
1. &quot;Metformin → Lifestyle → Controlled&quot; (shortest)
2. &quot;Metformin → Insulin → GLP-1 → Controlled&quot;
3. &quot;Lifestyle → Metformin → SGLT2 → Controlled&quot;
4. &quot;Metformin → DPP-4 → Insulin → Controlled&quot;
5. &quot;Insulin → Metformin → GLP-1 → Controlled&quot;

Data series (grouped bars for each pathway):

Series 1 - Patient Outcomes (blue bars):
- Pathway 1: 85
- Pathway 2: 78
- Pathway 3: 82
- Pathway 4: 75
- Pathway 5: 72

Series 2 - Cost Efficiency (green bars, inverted cost scale):
- Pathway 1: 90 (lowest cost = highest score)
- Pathway 2: 60
- Pathway 3: 75
- Pathway 4: 65
- Pathway 5: 55

Series 3 - Time to Control (orange bars, inverted time scale):
- Pathway 1: 88 (shortest time = highest score)
- Pathway 2: 70
- Pathway 3: 80
- Pathway 4: 68
- Pathway 5: 65

Title: &quot;Comparative Effectiveness of Type 2 Diabetes Treatment Pathways&quot;

Legend: Position top-right
- Blue: Patient outcome success rate
- Green: Cost efficiency (higher = lower cost)
- Orange: Time efficiency (higher = faster to control)

Annotations:
- Star icon next to Pathway 1: &quot;Optimal pathway (highest combined score)&quot;
- Note below chart: &quot;Based on analysis of 15,000 patient care pathways from graph database&quot;

Tooltip on hover:
- Show exact scores and underlying metrics (actual cost, days, outcome %)

Implementation: Chart.js horizontal grouped bar chart
</code></pre></div></td></tr></table></div>
</details>
<p>Advanced path queries can identify anomalous patterns that might indicate fraud or quality issues. Detecting unusual referral loops or unnecessarily long treatment pathways helps healthcare payers identify waste and providers optimize care delivery.</p>
<h2 id="subgraph-queries-extracting-clinical-context">Subgraph Queries: Extracting Clinical Context</h2>
<p>Subgraph queries extract connected regions of the graph that match complex criteria, preserving the full relational context around entities of interest. Unlike path queries that follow linear sequences, subgraph queries retrieve multi-dimensional neighborhoods, essential for understanding the full clinical context of patient care.</p>
<p>Healthcare use cases for subgraph queries include:</p>
<ul>
<li><strong>Patient context graphs</strong>: All entities related to a patient (providers, diagnoses, medications, encounters)</li>
<li><strong>Provider networks</strong>: Complete view of referral relationships and shared patients</li>
<li><strong>Disease comorbidity graphs</strong>: Conditions that co-occur in patient populations</li>
<li><strong>Care team subgraphs</strong>: All staff involved in treating a specific patient</li>
</ul>
<p>In Cypher, subgraph extraction combines multiple patterns:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1">// Extract complete clinical context for a patient</span>
<span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="p">:</span><span class="n">Patient</span><span class="w"> </span><span class="p">{</span><span class="n">patient_id</span><span class="p">:</span><span class="w"> </span><span class="err">&#39;</span><span class="n">PT</span><span class="err">-</span><span class="m">12345</span><span class="err">&#39;</span><span class="p">})</span>
<span class="k">CALL</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">WITH</span><span class="w"> </span><span class="n">p</span>
<span class="w">  </span><span class="k">OPTIONAL</span><span class="w"> </span><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">HAS_DIAGNOSIS</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">d</span><span class="p">:</span><span class="n">Diagnosis</span><span class="p">)</span>
<span class="w">  </span><span class="k">OPTIONAL</span><span class="w"> </span><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">TAKES</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">m</span><span class="p">:</span><span class="n">Medication</span><span class="p">)</span>
<span class="w">  </span><span class="k">OPTIONAL</span><span class="w"> </span><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">TREATED_BY</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">provider</span><span class="p">:</span><span class="n">Provider</span><span class="p">)</span>
<span class="w">  </span><span class="k">OPTIONAL</span><span class="w"> </span><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">HAS_ENCOUNTER</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">e</span><span class="p">:</span><span class="n">Encounter</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">AT_FACILITY</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">f</span><span class="p">:</span><span class="n">Facility</span><span class="p">)</span>
<span class="w">  </span><span class="k">RETURN</span><span class="w"> </span><span class="n">collect</span><span class="p">(</span><span class="k">DISTINCT</span><span class="w"> </span><span class="n">d</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">diagnoses</span><span class="p">,</span>
<span class="w">         </span><span class="n">collect</span><span class="p">(</span><span class="k">DISTINCT</span><span class="w"> </span><span class="n">m</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">medications</span><span class="p">,</span>
<span class="w">         </span><span class="n">collect</span><span class="p">(</span><span class="k">DISTINCT</span><span class="w"> </span><span class="n">provider</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">care_team</span><span class="p">,</span>
<span class="w">         </span><span class="n">collect</span><span class="p">(</span><span class="k">DISTINCT</span><span class="w"> </span><span class="n">f</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">facilities</span>
<span class="p">}</span>
<span class="k">RETURN</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">diagnoses</span><span class="p">,</span><span class="w"> </span><span class="n">medications</span><span class="p">,</span><span class="w"> </span><span class="n">care_team</span><span class="p">,</span><span class="w"> </span><span class="n">facilities</span>
</code></pre></div></td></tr></table></div>
<p>The <code>OPTIONAL MATCH</code> clauses ensure that all relationship types are checked even if some don't exist, and <code>collect()</code> aggregates related nodes into lists, providing complete clinical context in a single query result.</p>
<p>For healthcare analytics platforms, subgraph extraction enables comprehensive patient 360° views that would require dozens of SQL joins and complex application logic to assemble. By retrieving the entire clinical neighborhood in one query, graph databases dramatically simplify application architecture while improving query performance.</p>
<details>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  1</span>
<span class="normal">  2</span>
<span class="normal">  3</span>
<span class="normal">  4</span>
<span class="normal">  5</span>
<span class="normal">  6</span>
<span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span></pre></div></td><td class="code"><div><pre><span></span><code>&lt;summary&gt;Patient Clinical Context Subgraph Visualization&lt;/summary&gt;
Type: graph-model

Purpose: Illustrate a typical patient clinical context subgraph with all related healthcare entities

Node types:

1. Patient (large blue circle, center)
   - Properties: patient_id, name, age, gender
   - Example: &quot;Sarah Johnson, 67, Female&quot;

2. Diagnosis (red hexagons)
   - Properties: icd_code, condition_name, diagnosed_date
   - Examples: &quot;E11.9 Type 2 Diabetes&quot;, &quot;I10 Hypertension&quot;, &quot;E78.5 Hyperlipidemia&quot;

3. Medication (green rounded rectangles)
   - Properties: drug_name, dosage, start_date
   - Examples: &quot;Metformin 500mg&quot;, &quot;Lisinopril 10mg&quot;, &quot;Atorvastatin 20mg&quot;

4. Provider (purple squares)
   - Properties: name, specialty, npi
   - Examples: &quot;Dr. Martinez (PCP)&quot;, &quot;Dr. Chen (Endocrinology)&quot;, &quot;Dr. Patel (Cardiology)&quot;

5. Encounter (orange diamonds)
   - Properties: encounter_date, type, chief_complaint
   - Examples: &quot;2024-01-15 Office Visit&quot;, &quot;2024-03-20 Lab Work&quot;, &quot;2024-06-10 Follow-up&quot;

6. Facility (gray rounded squares)
   - Properties: facility_name, type, location
   - Examples: &quot;Community Health Center&quot;, &quot;Regional Hospital&quot;, &quot;ABC Lab Services&quot;

7. Lab Result (teal circles)
   - Properties: test_name, value, date
   - Examples: &quot;HbA1c: 7.2%&quot;, &quot;LDL: 110 mg/dL&quot;, &quot;Blood Pressure: 135/85&quot;

Edge types:

1. HAS_DIAGNOSIS (solid red arrows from Patient to Diagnosis)
   - Properties: diagnosed_date, status (active/resolved)

2. TAKES (solid green arrows from Patient to Medication)
   - Properties: start_date, end_date, prescribing_provider

3. TREATED_BY (dashed purple arrows from Patient to Provider)
   - Properties: relationship_start, last_encounter

4. HAS_ENCOUNTER (solid orange arrows from Patient to Encounter)
   - Properties: encounter_date, encounter_type

5. AT_FACILITY (dotted gray arrows from Encounter to Facility)
   - Properties: date, department

6. RESULTED_IN (blue arrows from Encounter to Lab Result)
   - Properties: collection_date

7. PRESCRIBED_BY (dotted green arrows from Medication to Provider)
   - Properties: prescription_date, refills

Sample data structure:
- Central Patient node: Sarah Johnson
  ├─ HAS_DIAGNOSIS → Type 2 Diabetes
  ├─ HAS_DIAGNOSIS → Hypertension
  ├─ HAS_DIAGNOSIS → Hyperlipidemia
  ├─ TAKES → Metformin (prescribed by Dr. Martinez)
  ├─ TAKES → Lisinopril (prescribed by Dr. Patel)
  ├─ TAKES → Atorvastatin (prescribed by Dr. Patel)
  ├─ TREATED_BY → Dr. Martinez (PCP)
  ├─ TREATED_BY → Dr. Chen (Endocrinology)
  ├─ TREATED_BY → Dr. Patel (Cardiology)
  ├─ HAS_ENCOUNTER → Office Visit 2024-01-15
  │   ├─ AT_FACILITY → Community Health Center
  │   └─ RESULTED_IN → HbA1c Lab Result
  ├─ HAS_ENCOUNTER → Lab Work 2024-03-20
  │   ├─ AT_FACILITY → ABC Lab Services
  │   └─ RESULTED_IN → LDL Lab Result
  └─ HAS_ENCOUNTER → Follow-up 2024-06-10
      └─ AT_FACILITY → Community Health Center

Layout: Radial/force-directed with Patient at center, entity types clustered by color

Interactive features:
- Hover over node: Display all properties in tooltip
- Click node: Highlight all directly connected nodes and relationships
- Double-click node: Expand to show additional details (e.g., full encounter notes)
- Click edge: Show relationship properties and temporal information
- Filter by entity type: Checkboxes to hide/show specific node types
- Temporal slider: Filter relationships by date range
- Search: Find specific entities within the subgraph

Visual styling:
- Node size proportional to number of connections (patient largest)
- Edge thickness based on relationship recency (recent = thicker)
- Color-coded nodes by type (consistent with legend)
- Temporal highlighting: Recent nodes/edges more saturated color

Legend (right sidebar):
- Node types with shape and color guide
- Edge types with line style guide
- Interactive controls explanation
- Property inspector panel (shows selected node details)

Implementation: vis-network JavaScript library
Canvas size: 1000x700px
Background: Light gray with subtle grid
</code></pre></div></td></tr></table></div>
</details>
<p>Subgraph queries also enable community detection and network analysis. Healthcare payers use subgraph extraction to identify provider communities with unusual billing patterns, potentially indicating fraud rings or waste. By querying for densely connected provider-patient-procedure subgraphs with statistical anomalies, investigators can quickly identify suspicious networks for detailed review.</p>
<h2 id="aggregate-queries-population-health-analytics">Aggregate Queries: Population Health Analytics</h2>
<p>Aggregate queries compute summary statistics across graph structures, essential for population health management, quality reporting, and healthcare operations analytics. While individual patient queries extract specific clinical details, aggregate queries reveal patterns, trends, and insights across entire populations.</p>
<p>Common healthcare aggregations include:</p>
<ul>
<li><strong>Disease prevalence</strong>: Count of patients with specific diagnoses by demographic groups</li>
<li><strong>Treatment effectiveness</strong>: Average outcomes for different intervention pathways</li>
<li><strong>Provider performance</strong>: Aggregate quality metrics per physician or facility</li>
<li><strong>Network statistics</strong>: Connectivity and centrality measures in referral or care networks</li>
</ul>
<p>Cypher provides standard aggregation functions (<code>count()</code>, <code>avg()</code>, <code>sum()</code>, <code>collect()</code>) that work seamlessly with pattern matching:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1">// Calculate average HbA1c by treatment pathway for diabetic patients</span>
<span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="p">:</span><span class="n">Patient</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">HAS_DIAGNOSIS</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">d</span><span class="p">:</span><span class="n">Disease</span><span class="w"> </span><span class="p">{</span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="err">&#39;</span><span class="n">Type</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="n">Diabetes</span><span class="err">&#39;</span><span class="p">})</span>
<span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="o">-[</span><span class="n">treat</span><span class="p">:</span><span class="n">TREATED_WITH</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">m</span><span class="p">:</span><span class="n">Medication</span><span class="p">)</span>
<span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">HAS_LAB_RESULT</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">lab</span><span class="p">:</span><span class="n">LabResult</span><span class="w"> </span><span class="p">{</span><span class="n">test_name</span><span class="p">:</span><span class="w"> </span><span class="err">&#39;</span><span class="n">HbA1c</span><span class="err">&#39;</span><span class="p">})</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">lab</span><span class="p">.</span><span class="n">result_date</span><span class="w"> </span><span class="p">&gt;</span><span class="w"> </span><span class="n">date</span><span class="p">(</span><span class="err">&#39;</span><span class="m">2024</span><span class="err">-</span><span class="m">01</span><span class="err">-</span><span class="m">01</span><span class="err">&#39;</span><span class="p">)</span>
<span class="k">WITH</span><span class="w"> </span><span class="n">m</span><span class="p">.</span><span class="n">drug_name</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">medication</span><span class="p">,</span>
<span class="w">     </span><span class="n">avg</span><span class="p">(</span><span class="n">toFloat</span><span class="p">(</span><span class="n">lab</span><span class="p">.</span><span class="n">value</span><span class="p">))</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">avg_hba1c</span><span class="p">,</span>
<span class="w">     </span><span class="n">count</span><span class="p">(</span><span class="k">DISTINCT</span><span class="w"> </span><span class="n">p</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">patient_count</span><span class="p">,</span>
<span class="w">     </span><span class="n">stdDev</span><span class="p">(</span><span class="n">toFloat</span><span class="p">(</span><span class="n">lab</span><span class="p">.</span><span class="n">value</span><span class="p">))</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">std_dev</span>
<span class="c1">WHERE patient_count &gt;= 30  // Statistical significance threshold</span>
<span class="k">RETURN</span><span class="w"> </span><span class="n">medication</span><span class="p">,</span>
<span class="w">       </span><span class="n">avg_hba1c</span><span class="p">,</span>
<span class="w">       </span><span class="n">patient_count</span><span class="p">,</span>
<span class="w">       </span><span class="n">std_dev</span>
<span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">avg_hba1c</span><span class="w"> </span><span class="k">ASC</span>
</code></pre></div></td></tr></table></div>
<p>This query groups patients by diabetes medication, calculates average HbA1c levels, and filters for statistically significant sample sizes—enabling evidence-based comparison of treatment effectiveness.</p>
<p>Advanced aggregate queries combine graph traversals with statistical functions. For example, calculating network centrality metrics identifies influential providers in referral networks:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1">// Find providers with highest referral centrality</span>
<span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="p">:</span><span class="n">Provider</span><span class="p">)</span>
<span class="k">OPTIONAL</span><span class="w"> </span><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">REFERS_TO</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">other</span><span class="p">:</span><span class="n">Provider</span><span class="p">)</span>
<span class="k">OPTIONAL</span><span class="w"> </span><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="o">&lt;-[</span><span class="p">:</span><span class="n">REFERRED_BY</span><span class="o">]-</span><span class="p">(</span><span class="n">referring</span><span class="p">:</span><span class="n">Provider</span><span class="p">)</span>
<span class="k">WITH</span><span class="w"> </span><span class="n">p</span><span class="p">,</span>
<span class="w">     </span><span class="n">count</span><span class="p">(</span><span class="k">DISTINCT</span><span class="w"> </span><span class="n">other</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">outbound_referrals</span><span class="p">,</span>
<span class="w">     </span><span class="n">count</span><span class="p">(</span><span class="k">DISTINCT</span><span class="w"> </span><span class="n">referring</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">inbound_referrals</span><span class="p">,</span>
<span class="w">     </span><span class="n">count</span><span class="p">(</span><span class="k">DISTINCT</span><span class="w"> </span><span class="n">other</span><span class="p">)</span><span class="w"> </span><span class="err">+</span><span class="w"> </span><span class="n">count</span><span class="p">(</span><span class="k">DISTINCT</span><span class="w"> </span><span class="n">referring</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">total_degree</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">total_degree</span><span class="w"> </span><span class="p">&gt;</span><span class="w"> </span><span class="m">10</span>
<span class="k">RETURN</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">name</span><span class="p">,</span>
<span class="w">       </span><span class="n">p</span><span class="p">.</span><span class="n">specialty</span><span class="p">,</span>
<span class="w">       </span><span class="n">outbound_referrals</span><span class="p">,</span>
<span class="w">       </span><span class="n">inbound_referrals</span><span class="p">,</span>
<span class="w">       </span><span class="n">total_degree</span>
<span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">total_degree</span><span class="w"> </span><span class="k">DESC</span>
<span class="k">LIMIT</span><span class="w"> </span><span class="m">20</span>
</code></pre></div></td></tr></table></div>
<p>Providers with high total_degree scores serve as network hubs, making them key stakeholders for care coordination initiatives or potential bottlenecks if capacity constrained.</p>
<details>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span></pre></div></td><td class="code"><div><pre><span></span><code>&lt;summary&gt;Medication Effectiveness Comparison MicroSim&lt;/summary&gt;
Type: microsim

Learning objective: Demonstrate how aggregate queries enable comparative effectiveness research by visualizing outcome distributions across treatment groups

Canvas layout (1000x700px):
- Left section (650x700): Visualization area with dual charts
- Right section (350x700): Control panel and data table

Visual elements (left section):

Top chart (650x350): Scatter plot with trend lines
- X-axis: Months on treatment (0-24)
- Y-axis: Average HbA1c level (4.0-10.0)
- Data points: Individual patient measurements (semi-transparent circles)
- Trend lines: One per medication group (smoothed averages)
- Color-coded by medication: Metformin (blue), Insulin (red), GLP-1 (green), SGLT2 (purple)
- Reference line: Clinical target HbA1c = 7.0 (dashed horizontal)

Bottom chart (650x350): Box plot comparison
- X-axis: Medication groups (Metformin, Insulin, GLP-1, SGLT2)
- Y-axis: HbA1c level at 12 months (4.0-10.0)
- Box plots showing median, quartiles, outliers for each medication
- Color-coded matching top chart
- Annotations showing patient counts per group

Interactive controls (right panel):

1. Filters section:
   - Slider: Patient age range (18-90)
   - Dropdown: Gender (All, Male, Female)
   - Checkboxes: Comorbidities to include/exclude (Hypertension, Hyperlipidemia, CKD)
   - Slider: Minimum patient count per group (10-100)

2. Medications to display:
   - Checkboxes for each medication type (all checked by default)
   - Color indicators next to each

3. Time window:
   - Slider: Follow-up duration (3-24 months)
   - Radio buttons: Outcome metric (HbA1c, Weight Change, Hypoglycemia Events)

4. Statistics panel:
   - Auto-updating table showing:
     * Medication name
     * N (patient count)
     * Mean outcome
     * Std deviation
     * p-value vs reference group

5. Action buttons:
   - &quot;Run Query&quot;: Execute graph aggregate query with current filters
   - &quot;Reset&quot;: Return to default parameters
   - &quot;Export Data&quot;: Download results as CSV

Default parameters:
- Age range: 40-70
- Gender: All
- Comorbidities: None selected (all patients)
- Minimum N: 30
- Follow-up: 12 months
- Outcome: HbA1c

Behavior:
- On load: Display initial aggregate data
- When filters change: Update statistics panel immediately
- Click &quot;Run Query&quot;: Animate query execution
  * Show &quot;Executing graph query...&quot; message
  * Display mock query text in console area
  * Animate data point loading (fade in over 1 second)
  * Update charts with new filtered data
  * Recalculate statistics and p-values
- Hover over data point: Show patient details tooltip
- Hover over box plot: Show detailed quartile values
- Click trend line: Highlight that medication group

Sample data:
- Simulate 500 patients across 4 medication groups
- Include realistic outcome distributions based on clinical literature
- Metformin: Lower cost, moderate effectiveness
- Insulin: Variable outcomes, higher hypoglycemia risk
- GLP-1: Best outcomes, highest cost
- SGLT2: Good outcomes, CV benefits

Educational annotations:
- Tooltip explaining statistical significance when hovering p-values
- Info icon near box plots explaining quartile interpretation
- Sample Cypher query displayed in collapsible code panel

Implementation notes:
- Use p5.js for scatter plot rendering
- Chart.js for box plots
- Calculate statistics using JavaScript math libraries
- Color scheme accessible (colorblind-friendly palette)
- Responsive scaling for different display sizes

Implementation: p5.js with Chart.js for box plots, custom statistics calculations
</code></pre></div></td></tr></table></div>
</details>
<p>Aggregate queries in graph databases offer significant advantages over traditional analytics. Rather than pre-aggregating data into summary tables or OLAP cubes, graph databases compute aggregates dynamically across relationship structures, enabling ad-hoc analysis of arbitrary groupings and network-based statistics that would be prohibitively complex in relational systems.</p>
<h2 id="graph-indexes-accelerating-query-performance">Graph Indexes: Accelerating Query Performance</h2>
<p>Graph indexes optimize query performance by providing fast lookup structures for node and edge properties, enabling efficient filtering and entry points for graph traversals. Unlike relational indexes that primarily optimize join performance, graph indexes focus on accelerating pattern matching and property-based node selection.</p>
<p>Graph databases typically support several index types:</p>
<ul>
<li><strong>Property indexes</strong>: B-tree or hash indexes on node/edge properties</li>
<li><strong>Full-text indexes</strong>: Text search across property values</li>
<li><strong>Composite indexes</strong>: Multi-property indexes for complex filters</li>
<li><strong>Spatial indexes</strong>: Geographic queries (R-tree based)</li>
</ul>
<p>In Neo4j, creating a property index follows this syntax:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1">// Create index on Patient nodes by patient_id for fast lookup</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="n">patient_id_index</span><span class="w"> </span><span class="n">FOR</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="p">:</span><span class="n">Patient</span><span class="p">)</span><span class="w"> </span><span class="n">ON</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">patient_id</span><span class="p">);</span>

<span class="c1">// Create composite index on Diagnosis for disease + date filtering</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="n">diagnosis_date_index</span><span class="w"> </span><span class="n">FOR</span><span class="w"> </span><span class="p">(</span><span class="n">d</span><span class="p">:</span><span class="n">Diagnosis</span><span class="p">)</span><span class="w"> </span><span class="n">ON</span><span class="w"> </span><span class="p">(</span><span class="n">d</span><span class="p">.</span><span class="n">icd_code</span><span class="p">,</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">diagnosed_date</span><span class="p">);</span>

<span class="c1">// Create full-text index for searching medication names</span>
<span class="k">CREATE</span><span class="w"> </span><span class="n">FULLTEXT</span><span class="w"> </span><span class="n">INDEX</span><span class="w"> </span><span class="n">medication_search</span><span class="w"> </span><span class="n">FOR</span><span class="w"> </span><span class="p">(</span><span class="n">m</span><span class="p">:</span><span class="n">Medication</span><span class="p">)</span><span class="w"> </span><span class="n">ON</span><span class="w"> </span><span class="n">EACH</span><span class="w"> </span><span class="o">[</span><span class="n">m</span><span class="p">.</span><span class="n">drug_name</span><span class="p">,</span><span class="w"> </span><span class="n">m</span><span class="p">.</span><span class="n">generic_name</span><span class="o">]</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<p>Effective indexing strategy considers query patterns and data distribution. For healthcare graphs, common indexes include:</p>
<table>
<thead>
<tr>
<th>Entity Type</th>
<th>Index Properties</th>
<th>Rationale</th>
</tr>
</thead>
<tbody>
<tr>
<td>Patient</td>
<td>patient_id, mrn</td>
<td>Unique identifier lookups for patient queries</td>
</tr>
<tr>
<td>Provider</td>
<td>npi, name</td>
<td>Provider search and referral queries</td>
</tr>
<tr>
<td>Diagnosis</td>
<td>icd_code, diagnosed_date</td>
<td>Disease cohort identification and temporal filtering</td>
</tr>
<tr>
<td>Medication</td>
<td>drug_code, drug_name</td>
<td>Prescription pattern analysis and drug interaction queries</td>
</tr>
<tr>
<td>Encounter</td>
<td>encounter_id, encounter_date</td>
<td>Temporal analysis of care episodes</td>
</tr>
<tr>
<td>LabResult</td>
<td>test_name, result_date</td>
<td>Clinical outcome queries and longitudinal analysis</td>
</tr>
</tbody>
</table>
<p>Indexes improve query performance dramatically for selective filters. A query finding patients with a specific diagnosis benefits from an ICD code index:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1">// Without index: Full scan of all Diagnosis nodes</span>
<span class="c1">// With index: Direct lookup of matching nodes</span>
<span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="p">:</span><span class="n">Patient</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">HAS_DIAGNOSIS</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">d</span><span class="p">:</span><span class="n">Diagnosis</span><span class="w"> </span><span class="p">{</span><span class="n">icd_code</span><span class="p">:</span><span class="w"> </span><span class="err">&#39;</span><span class="n">E11</span><span class="p">.</span><span class="m">9</span><span class="err">&#39;</span><span class="p">})</span>
<span class="k">RETURN</span><span class="w"> </span><span class="n">count</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>For a database with 10 million diagnosis nodes, an indexed query executes in milliseconds while an unindexed query might require seconds or minutes of full node scanning.</p>
<details>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span></pre></div></td><td class="code"><div><pre><span></span><code>&lt;summary&gt;Query Performance Impact of Indexing&lt;/summary&gt;
Type: chart

Chart type: Line chart with dual Y-axes

Purpose: Demonstrate performance improvement from indexing on healthcare graph queries of increasing complexity

X-axis: Query complexity (number of nodes in result set)
- Values: 10, 100, 1K, 10K, 100K, 1M

Left Y-axis: Query execution time (milliseconds, logarithmic scale)
Right Y-axis: Throughput (queries per second)

Data series:

Series 1 - Without Index (red line, left axis):
- 10 nodes: 50ms
- 100 nodes: 250ms
- 1K nodes: 1,800ms
- 10K nodes: 15,000ms
- 100K nodes: 125,000ms
- 1M nodes: 980,000ms (timeout)

Series 2 - With Property Index (blue line, left axis):
- 10 nodes: 5ms
- 100 nodes: 12ms
- 1K nodes: 45ms
- 10K nodes: 180ms
- 100K nodes: 950ms
- 1M nodes: 6,200ms

Series 3 - With Composite Index (green line, left axis):
- 10 nodes: 3ms
- 100 nodes: 8ms
- 1K nodes: 28ms
- 10K nodes: 110ms
- 100K nodes: 520ms
- 1M nodes: 3,100ms

Title: &quot;Impact of Indexing on Patient Diagnosis Query Performance&quot;

Legend: Position top-left
- Red: No index (full node scan)
- Blue: Single property index (icd_code)
- Green: Composite index (icd_code + diagnosed_date)

Annotations:
- Shaded region above 1000ms: &quot;Unacceptable for real-time applications&quot;
- Arrow pointing to green line: &quot;Composite index enables sub-second queries up to 100K patients&quot;
- Note at 1M data point: &quot;Red line: Query timeout (&gt;16 minutes)&quot;

Grid lines: Horizontal at 10ms, 100ms, 1000ms thresholds

Tooltip on hover:
- Exact execution time
- Speedup factor vs non-indexed
- Equivalent queries per second

Implementation: Chart.js line chart with logarithmic Y-axis
</code></pre></div></td></tr></table></div>
</details>
<p>However, indexes come with trade-offs. Each index consumes memory and storage, and write operations (creating/updating/deleting nodes) must update all relevant indexes, adding overhead. Index strategy should balance read performance against write costs based on application workload characteristics.</p>
<p>For healthcare applications with high read-to-write ratios (clinical decision support, analytics dashboards), aggressive indexing improves user experience. For systems with frequent updates (real-time EHR integration, streaming vitals data), selective indexing on only the most critical properties reduces write amplification.</p>
<h2 id="query-performance-tuning">Query Performance Tuning</h2>
<p>Query performance in graph databases depends on multiple factors: index utilization, traversal depth, result set size, and query planner optimization. Understanding these factors enables healthcare data engineers to write efficient queries that deliver sub-second response times even on large clinical datasets.</p>
<p>Key performance optimization techniques include:</p>
<ul>
<li><strong>Anchor pattern matching</strong>: Start queries from specific, indexed nodes rather than scanning all nodes</li>
<li><strong>Filter early</strong>: Apply property constraints before expensive traversals</li>
<li><strong>Limit traversal depth</strong>: Use bounded variable-length paths to prevent exponential explosion</li>
<li><strong>Profile queries</strong>: Use <code>EXPLAIN</code> and <code>PROFILE</code> to analyze query plans</li>
<li><strong>Parameterize queries</strong>: Enable query plan caching and reuse</li>
</ul>
<p>Consider this poorly optimized query:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1">// Anti-pattern: Scans all patients then filters</span>
<span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="p">:</span><span class="n">Patient</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">HAS_DIAGNOSIS</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">d</span><span class="p">:</span><span class="n">Diagnosis</span><span class="p">)</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">age</span><span class="w"> </span><span class="p">&gt;</span><span class="w"> </span><span class="m">65</span><span class="w"> </span><span class="n">AND</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">icd_code</span><span class="w"> </span><span class="k">STARTS</span><span class="w"> </span><span class="k">WITH</span><span class="w"> </span><span class="err">&#39;</span><span class="n">E11</span><span class="err">&#39;</span>
<span class="k">RETURN</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">d</span>
</code></pre></div></td></tr></table></div>
<p>This query matches all Patient-Diagnosis patterns, then filters—potentially scanning millions of relationships. An optimized version anchors on indexed lookups:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1">// Optimized: Start from indexed Diagnosis nodes</span>
<span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">d</span><span class="p">:</span><span class="n">Diagnosis</span><span class="p">)</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">icd_code</span><span class="w"> </span><span class="k">STARTS</span><span class="w"> </span><span class="k">WITH</span><span class="w"> </span><span class="err">&#39;</span><span class="n">E11</span><span class="err">&#39;</span>
<span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="p">:</span><span class="n">Patient</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">HAS_DIAGNOSIS</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">age</span><span class="w"> </span><span class="p">&gt;</span><span class="w"> </span><span class="m">65</span>
<span class="k">RETURN</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">d</span>
</code></pre></div></td></tr></table></div>
<p>By starting from Diagnosis nodes filtered by indexed ICD code, the query only traverses relationships for relevant diagnoses, dramatically reducing work.</p>
<p>The <code>PROFILE</code> keyword provides detailed execution statistics:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">PROFILE</span>
<span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="p">:</span><span class="n">Patient</span><span class="w"> </span><span class="p">{</span><span class="n">patient_id</span><span class="p">:</span><span class="w"> </span><span class="err">&#39;</span><span class="n">PT</span><span class="err">-</span><span class="m">12345</span><span class="err">&#39;</span><span class="p">})</span><span class="o">-[</span><span class="p">:</span><span class="n">TAKES</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">m</span><span class="p">:</span><span class="n">Medication</span><span class="p">)</span>
<span class="k">RETURN</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">collect</span><span class="p">(</span><span class="n">m</span><span class="p">.</span><span class="n">drug_name</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">medications</span>
</code></pre></div></td></tr></table></div>
<p>The profile output shows:
- Database hits (I/O operations)
- Rows processed at each step
- Index usage
- Memory consumption
- Execution time breakdown</p>
<p>For healthcare applications requiring real-time responses (clinical decision support alerts, patient lookup interfaces), queries should execute in under 100ms. Profiling helps identify bottlenecks—missing indexes, unbounded traversals, or inefficient filters.</p>
<p>Variable-length path queries require special attention. Unbounded paths can cause exponential traversal explosion:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1">// Dangerous: Unbounded path could traverse millions of edges</span>
<span class="k">MATCH</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="p">:</span><span class="n">Patient</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">TREATED_BY</span><span class="p">*</span><span class="o">]-</span><span class="p">(</span><span class="n">provider</span><span class="p">:</span><span class="n">Provider</span><span class="p">)</span>
<span class="k">RETURN</span><span class="w"> </span><span class="n">path</span>
</code></pre></div></td></tr></table></div>
<p>Always bound path lengths and add filters:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1">// Safe: Bounded depth with early filtering</span>
<span class="k">MATCH</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="p">:</span><span class="n">Patient</span><span class="w"> </span><span class="p">{</span><span class="n">patient_id</span><span class="p">:</span><span class="w"> </span><span class="err">&#39;</span><span class="n">PT</span><span class="err">-</span><span class="m">12345</span><span class="err">&#39;</span><span class="p">})</span><span class="o">-[</span><span class="p">:</span><span class="n">TREATED_BY</span><span class="p">*</span><span class="m">1</span><span class="p">..</span><span class="m">3</span><span class="o">]-</span><span class="p">(</span><span class="n">provider</span><span class="p">:</span><span class="n">Provider</span><span class="p">)</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">provider</span><span class="p">.</span><span class="n">specialty</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="err">&#39;</span><span class="n">Cardiology</span><span class="err">&#39;</span>
<span class="k">RETURN</span><span class="w"> </span><span class="n">path</span>
</code></pre></div></td></tr></table></div>
<details>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span></pre></div></td><td class="code"><div><pre><span></span><code>&lt;summary&gt;Query Optimization Workflow Diagram&lt;/summary&gt;
Type: workflow

Purpose: Illustrate the systematic process for optimizing slow healthcare graph queries

Visual style: Flowchart with decision diamonds, process rectangles, and annotation boxes

Steps:

1. Start: &quot;Slow Query Identified&quot;
   Hover: &quot;User reports query taking &gt;5 seconds or timing out&quot;

2. Process: &quot;Run PROFILE Analysis&quot;
   Hover: &quot;Execute query with PROFILE keyword to gather execution statistics&quot;
   Annotation: `PROFILE MATCH (p:Patient)... RETURN p`

3. Decision: &quot;Index Available?&quot;
   Hover: &quot;Check if query uses indexed properties for anchor nodes&quot;

4a. If No → Process: &quot;Create Appropriate Index&quot;
    Hover: &quot;Add property or composite index on filter properties&quot;
    Annotation: `CREATE INDEX FOR (p:Patient) ON (p.mrn)`
    → Loop back to step 2

4b. If Yes → Continue to step 5

5. Decision: &quot;Scanning Full Node Labels?&quot;
   Hover: &quot;Check if query matches MATCH (p:Patient) without property filters&quot;

6a. If Yes → Process: &quot;Add Anchoring Filters&quot;
    Hover: &quot;Rewrite query to start from specific indexed nodes&quot;
    Annotation: &quot;Start from indexed lookup: WHERE p.patient_id = $id&quot;
    → Loop back to step 2

6b. If No → Continue to step 7

7. Decision: &quot;Unbounded Traversals?&quot;
   Hover: &quot;Check for variable-length paths without max depth: *  or *1..&quot;

8a. If Yes → Process: &quot;Add Path Length Bounds&quot;
    Hover: &quot;Set maximum traversal depth: *1..5&quot;
    Annotation: &quot;Prevent exponential expansion&quot;
    → Loop back to step 2

8b. If No → Continue to step 9

9. Decision: &quot;Large Result Set?&quot;
   Hover: &quot;Check if query returns &gt;10,000 rows&quot;

10a. If Yes → Process: &quot;Add Pagination&quot;
     Hover: &quot;Use SKIP/LIMIT for pagination, return only needed data&quot;
     Annotation: `RETURN p SKIP $offset LIMIT $page_size`
     → Loop back to step 2

10b. If No → Continue to step 11

11. Decision: &quot;Complex Aggregations?&quot;
    Hover: &quot;Check for multiple collect(), count(), or statistical functions&quot;

12a. If Yes → Process: &quot;Split into Subqueries&quot;
     Hover: &quot;Use CALL subqueries to optimize aggregation order&quot;
     Annotation: &quot;Break complex query into CALL {...} blocks&quot;
     → Loop back to step 2

12b. If No → Continue to step 13

13. Process: &quot;Consider Graph Schema Optimization&quot;
    Hover: &quot;Denormalize frequently-accessed properties or restructure relationships&quot;
    Annotation: &quot;May require data model changes&quot;

14. End: &quot;Query Optimized&quot;
    Hover: &quot;Query now executes within performance target (&lt;100ms for real-time, &lt;5s for analytics)&quot;

Color coding:
- Blue: Analysis/profiling steps
- Yellow: Decision points
- Green: Optimization actions
- Orange: Schema design considerations

Swimlanes:
- Developer (left): Query writing and profiling
- Database (center): Execution and optimization
- DBA (right): Schema and index management

Annotations:
- Side panel showing sample PROFILE output
- Example query transformations for each optimization type
- Performance targets: &lt;100ms (real-time), &lt;5s (interactive analytics)

Implementation: SVG flowchart with interactive hover tooltips and expandable code examples
</code></pre></div></td></tr></table></div>
</details>
<p>For healthcare systems handling high query volumes, query parameterization enables plan caching. Rather than compiling a new execution plan for each patient lookup, parameterized queries reuse optimized plans:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1">// Parameterized query - plan is cached and reused</span>
<span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="p">:</span><span class="n">Patient</span><span class="w"> </span><span class="p">{</span><span class="n">patient_id</span><span class="p">:</span><span class="w"> </span><span class="err">$</span><span class="n">patientId</span><span class="p">})</span>
<span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">HAS_DIAGNOSIS</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">d</span><span class="p">:</span><span class="n">Diagnosis</span><span class="p">)</span>
<span class="k">RETURN</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">collect</span><span class="p">(</span><span class="n">d</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">diagnoses</span>

<span class="c1">// Application code passes parameter:</span>
<span class="c1">// params = {&quot;patientId&quot;: &quot;PT-12345&quot;}</span>
</code></pre></div></td></tr></table></div>
<p>Query performance optimization is iterative. Start with profiling to identify bottlenecks, apply targeted optimizations (indexing, filtering, bounding), and measure results. For production healthcare systems, ongoing performance monitoring and query tuning ensures consistent response times as data volumes grow.</p>
<h2 id="graph-query-optimization-strategies">Graph Query Optimization Strategies</h2>
<p>Beyond individual query tuning, system-level optimization strategies improve overall graph database performance for healthcare applications. These strategies address data modeling, caching, and architectural considerations that compound across all queries.</p>
<p><strong>Data model optimization</strong> techniques include:</p>
<ul>
<li><strong>Denormalization</strong>: Store frequently-accessed computed properties on nodes to avoid repeated calculations</li>
<li><strong>Relationship properties</strong>: Move properties to edges when they describe the connection rather than entities</li>
<li><strong>Intermediate nodes</strong>: Convert multi-property edges into nodes for complex relationship metadata</li>
<li><strong>Bidirectional relationships</strong>: Create reciprocal edges for queries traversing both directions</li>
</ul>
<p>For example, storing a patient's most recent HbA1c directly on the Patient node avoids traversing all lab results for common queries:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1">// Instead of: MATCH (p:Patient)-[:HAS_LAB_RESULT]-&gt;(lab:LabResult {test_name: &#39;HbA1c&#39;})</span>
<span class="c1">// Optimize with: MATCH (p:Patient) RETURN p.latest_hba1c</span>
</code></pre></div></td></tr></table></div>
<p><strong>Query planning optimization</strong> leverages database-specific features:</p>
<ul>
<li><strong>Statistics collection</strong>: Ensure graph databases have current statistics on node counts and degree distributions</li>
<li><strong>Cost-based optimization</strong>: Configure planner settings for healthcare workload patterns</li>
<li><strong>Parallel query execution</strong>: Enable parallel execution for aggregate queries across large subgraphs</li>
</ul>
<p><strong>Caching strategies</strong> reduce repeated query overhead:</p>
<ul>
<li><strong>Application-level caching</strong>: Cache frequent query results (provider directories, code lists)</li>
<li><strong>Materialized graph views</strong>: Pre-compute complex subgraphs for dashboard queries</li>
<li><strong>Query result streaming</strong>: Return partial results for large result sets</li>
</ul>
<p>For healthcare analytics with complex recurring queries (population health cohort analysis, quality measure calculation), consider materializing commonly-accessed subgraphs as separate graphs or using database features like Neo4j's Graph Data Science library to create in-memory projected graphs optimized for analytical algorithms.</p>
<h2 id="practical-considerations-for-healthcare-applications">Practical Considerations for Healthcare Applications</h2>
<p>Implementing graph queries in production healthcare systems requires attention to several operational concerns beyond query syntax and performance.</p>
<p><strong>Security and access control</strong> must enforce HIPAA privacy requirements at the query level:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1">// Row-level security example: Only return patients user is authorized to see</span>
<span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="p">:</span><span class="n">Patient</span><span class="p">)</span>
<span class="c1">WHERE p.patient_id IN $authorized_patients  // Passed from application</span>
<span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">HAS_DIAGNOSIS</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">d</span><span class="p">:</span><span class="n">Diagnosis</span><span class="p">)</span>
<span class="k">RETURN</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">d</span>
</code></pre></div></td></tr></table></div>
<p>Application layers must validate authorization before executing queries, and audit logging should capture all queries accessing patient data for compliance reporting.</p>
<p><strong>Data quality and validation</strong> challenges include:</p>
<ul>
<li><strong>Missing data</strong>: Use <code>OPTIONAL MATCH</code> for relationships that may not exist</li>
<li><strong>Data type inconsistencies</strong>: Validate and cast property types (e.g., <code>toInteger()</code>, <code>toFloat()</code>)</li>
<li><strong>Temporal data handling</strong>: Standardize date/time formats and handle time zones correctly</li>
<li><strong>Code system versioning</strong>: Track ICD, CPT, and drug code versions to ensure correct interpretation</li>
</ul>
<p><strong>Integration patterns</strong> connect graph databases with existing healthcare IT infrastructure:</p>
<ul>
<li><strong>EHR integration</strong>: Real-time feeds from Epic, Cerner via HL7 FHIR APIs</li>
<li><strong>Data warehouse sync</strong>: Bidirectional sync with relational analytics databases</li>
<li><strong>Microservices architecture</strong>: Graph database as specialized service for relationship-intensive queries</li>
<li><strong>Hybrid approaches</strong>: Operational data in relational, graph views for analytics</li>
</ul>
<p>For organizations migrating from relational to graph databases, hybrid architectures enable gradual transition. Critical transactional workloads remain in relational systems while analytics queries leverage graph capabilities, with ETL processes synchronizing data between systems.</p>
<h2 id="summary-and-key-takeaways">Summary and Key Takeaways</h2>
<p>Graph query languages transform healthcare data analysis by enabling intuitive, high-performance queries over complex relational structures. This chapter explored three major query languages and the fundamental patterns underlying graph data access.</p>
<p>Key concepts covered:</p>
<ul>
<li><strong>Pattern matching</strong> forms the foundation of graph queries, expressing structural queries declaratively</li>
<li><strong>Cypher</strong> provides an intuitive, widely-adopted syntax with ASCII-art visualization of patterns</li>
<li><strong>GQL</strong> represents the standardized future of graph queries, similar to SQL's role for relational databases</li>
<li><strong>GSQL</strong> enables high-performance compiled queries with procedural programming capabilities</li>
<li><strong>Path queries</strong> analyze sequential relationships critical for care pathways and referral networks</li>
<li><strong>Subgraph queries</strong> extract complete clinical context preserving relational neighborhoods</li>
<li><strong>Aggregate queries</strong> compute population-level statistics across graph structures</li>
<li><strong>Indexing</strong> accelerates property-based filtering and provides efficient query entry points</li>
<li><strong>Query optimization</strong> requires understanding execution plans, anchoring strategies, and performance profiling</li>
</ul>
<p>Healthcare applications benefit from graph queries through:</p>
<ul>
<li><strong>Real-time clinical decision support</strong> powered by sub-second traversal of patient histories</li>
<li><strong>Population health analytics</strong> leveraging aggregate functions across relationship structures</li>
<li><strong>Fraud detection</strong> using subgraph and community detection queries</li>
<li><strong>Care pathway optimization</strong> through path analysis and comparative effectiveness research</li>
<li><strong>Provider network analysis</strong> calculating centrality and connectivity metrics</li>
</ul>
<p>As healthcare organizations increasingly adopt graph databases for their complex data challenges, mastering graph query languages becomes essential for data engineers, analysts, and developers building next-generation clinical systems. The declarative nature and performance characteristics of graph queries enable analytics that would be impractical or impossible using traditional relational approaches, ultimately supporting better patient outcomes through data-driven insights.</p>
<h2 id="references">References</h2>
<ol>
<li>
<p><a href="https://neo4j.com/docs/cypher-manual/current/">Cypher Query Language Reference</a> - 2024 - Neo4j Documentation - Comprehensive official documentation for Cypher declarative graph query language covering pattern matching, filtering, aggregation, and advanced querying techniques used throughout Neo4j graph database applications.</p>
</li>
<li>
<p><a href="https://opencypher.org/">openCypher Project</a> - 2024 - openCypher Implementers Group - Open-source specification and resources for the Cypher graph query language enabling cross-platform graph query standardization and implementation across multiple graph database systems.</p>
</li>
<li>
<p><a href="https://tinkerpop.apache.org/docs/current/reference/">Apache TinkerPop Documentation</a> - 2024 - Apache Software Foundation - Official reference for Apache TinkerPop graph computing framework including Gremlin query language used with various graph databases for traversal-based queries and graph analytics.</p>
</li>
</ol>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../02-intro-to-healthcare-systems/quiz/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Quiz">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Quiz
              </div>
            </div>
          </a>
        
        
          
          <a href="quiz/" class="md-footer__link md-footer__link--next" aria-label="Next: Quiz">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Quiz
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy", "navigation.expand", "navigation.path", "navigation.prune", "navigation.indexes", "toc.follow", "navigation.top", "navigation.footer", "content.action.edit"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
        <script src="../../js/extra.js"></script>
      
    
  </body>
</html>